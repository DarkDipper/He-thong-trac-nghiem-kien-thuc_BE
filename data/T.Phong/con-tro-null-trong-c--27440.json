{
    "title": "Con trỏ NULL trong C++",
    "desicription": "Nó luôn luôn là một bài thực hành tốt khi gán con trỏ NULL cho một biến con trỏ trong trường hợp bạn không biết chính xác địa chỉ để được gán. Điều này được thực hiện tại thời điểm khai báo biến. Một con trỏ mà được gán NULL được gọi là một con trỏ null. Để tìm hiểu rõ hơn về con trỏ Null, mời bạn đọc tham khảo bài viết dưới đây của eLib",
    "img": "https://www.elib.vn/images/doc/2020/20201028//thumb/600x254/con-tro-null-trong-c-803.jpg",
    "content": "\n              <div id=\"1\">\n<h2>1. Giá trị null và con trỏ null</h2>\n</div>\n\n<p>Giống như các biến thông thường, con trỏ cũng không được khởi tạo khi chúng được thể hiện/khai báo (instantiated). Trừ khi có một giá trị được gán, nếu không thì con trỏ sẽ trỏ đến một số địa chỉ rác theo mặc định.</p>\n\n<p>Ngoài địa chỉ bộ nhớ ra, còn có một giá trị khác mà con trỏ có thể giữ: đó là giá trị null. Giá trị null là một giá trị đặc biệt, có ý nghĩa là con trỏ đang không trỏ đến bất cứ thứ gì. Một con trỏ chứa giá trị null được gọi là con trỏ null.</p>\n\n<p>Trong C++, chúng ta có thể gán giá trị null cho một con trỏ bằng cách khởi tạo hoặc gán cho nó giá trị bằng 0.</p>\n\n<pre><code class=\"language-cpp hljs\"><span class=\"hljs-keyword\">float</span> *ptr { <span class=\"hljs-number\">0</span> };  <span class=\"hljs-comment\">// ptr is now a null pointer</span>\n \n<span class=\"hljs-keyword\">float</span> *ptr2; <span class=\"hljs-comment\">// ptr2 is uninitialized</span>\nptr2 = <span class=\"hljs-number\">0</span>; <span class=\"hljs-comment\">// ptr2 is now a null pointer</span></code></pre>\n\n<p>Con trỏ sẽ chuyển thành boolean false nếu chúng null, và boolean true nếu chúng không null. Do đó, chúng ta có thể sử dụng một câu lệnh kiểm tra điều kiện để kiểm tra liệu rằng một con trỏ có null hay không:</p>\n\n<pre><code class=\"language-cpp hljs\"><span class=\"hljs-keyword\">double</span> *ptr { <span class=\"hljs-number\">0</span> };\n \n<span class=\"hljs-comment\">// pointers convert to boolean false if they are null, and boolean true if they are non-null</span>\n<span class=\"hljs-keyword\">if</span> (ptr)\n    <span class=\"hljs-built_in\">std</span>::<span class=\"hljs-built_in\">cout</span> &lt;&lt; <span class=\"hljs-string\">\"ptr is pointing to a double value.\"</span>;\n<span class=\"hljs-keyword\">else</span>\n    <span class=\"hljs-built_in\">std</span>::<span class=\"hljs-built_in\">cout</span> &lt;&lt; <span class=\"hljs-string\">\"ptr is a null pointer.\"</span>;</code></pre>\n\n<div id=\"2\">\n<h2>2. Dereferencing một con trỏ null</h2>\n</div>\n\n<p>Trong bài trước, chúng ta đã biết rằng việc dereferencing một con trỏ rác sẽ dẫn đến các kết quả không xác định. Việc dereferencing một con trỏ null cũng sẽ dẫn đến lỗi hành vi không xác định (undefined behavior). Trong hầu hết các trường hợp, nó sẽ làm ứng dụng của bạn bị crash.</p>\n\n<p>Về mặt khái niệm, điều này thật sự có ý nghĩa. Việc dereferencing một con trỏ có nghĩa là “đi đến địa chỉ mà con trỏ đang trỏ tới và truy cập vào giá trị ở đó”. Và một con trỏ null thì giữ địa chỉ nào bên trong nó. Vì thế, hãy thử nghĩ xem, khi bạn cố gắng truy cập giá trị tại địa chỉ đó, con trỏ nên làm thế nào đây? ☺\\</p>\n\n<div id=\"3\">\n<h2>3. Null macro</h2>\n</div>\n\n<p>Giải thích macro là gì: Một macro là một đoạn code đã được đặt tên. Bất cứ khi nào tên này được sử dụng, nó sẽ được thay thế bằng nội dụng của macro. Có hai loại macro. Chúng khác nhau chủ yếu ở về hình thức khi chúng được sử dụng. Các macro giống như đối tượng (Object-like macros) thì giống với các đối tượng dữ liệu khi được sử dụng, các macro giống hàm (Function-like macro) thì giống với các lời gọi hàm.</p>\n\n<p>Quay trở lại với con trỏ, lưu ý rằng giá trị 0 không phải là một kiểu dữ liệu con trỏ, do đó việc gán 0 (hoặc NULL, trước C++ 11) cho một con trỏ để biểu thị rằng nó là con trỏ null dường như gây ra sự không nhất quán. Trong một số trường hợp hiếm, khi được sử dụng làm đối số theo nghĩa đen, nó thậm chí có thể gây ra sự cố vì trình biên dịch không thể hiểu được chúng ta đangmuốn nói đến một con trỏ null hay số nguyên 0.</p>\n\n<pre><code class=\"language-cpp hljs\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;cstddef&gt; // for NULL</span></span>\n \n<span class=\"hljs-keyword\">double</span> *ptr { <span class=\"hljs-literal\">NULL</span> }; <span class=\"hljs-comment\">// ptr is a null pointer</span></code></pre>\n\n<p>Trong trường hợp có khả năng NULL được định nghĩa là giá trị 0, khi thực hiện print(NULL) thực chất sẽ là gọi print(int), chứ không phải print(int*) như bạn vẫn mong đợi đối với một con trỏ null đúng nghĩa.</p>\n\n<div id=\"4\">\n<h2>4. nullptr trong C++ 11</h2>\n</div>\n\n<p>Để giải quyết vấn đề ở bên trên, C++ 11 đã giới thiệu 1 từ khóa mới gọi là nullptr. nullptr vừa là một từ khóa, và vừa là một giá trị hằng rvalue, giống như các từ khóa boolean là true và false.</p>\n\n<p>Bắt đầu từ C++ 11, nullptr sẽ được ưu tiên hơn thay cho 0 khi chúng ta muốn có một con trỏ null:</p>\n\n<pre><code class=\"language-cpp hljs\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;iostream&gt;</span></span>\n<span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;cstddef&gt; // for NULL</span></span>\n \n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> x)</span>\n</span>{\n\t<span class=\"hljs-built_in\">std</span>::<span class=\"hljs-built_in\">cout</span> &lt;&lt; <span class=\"hljs-string\">\"print(int): \"</span> &lt;&lt; x &lt;&lt; <span class=\"hljs-string\">'\\n'</span>;\n}\n \n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> *x)</span>\n</span>{\n\t<span class=\"hljs-keyword\">if</span> (!x)\n\t\t<span class=\"hljs-built_in\">std</span>::<span class=\"hljs-built_in\">cout</span> &lt;&lt; <span class=\"hljs-string\">\"print(int*): null\\n\"</span>;\n\t<span class=\"hljs-keyword\">else</span>\n\t\t<span class=\"hljs-built_in\">std</span>::<span class=\"hljs-built_in\">cout</span> &lt;&lt; <span class=\"hljs-string\">\"print(int*): \"</span> &lt;&lt; *x &lt;&lt; <span class=\"hljs-string\">'\\n'</span>;\n}\n \n<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span>\n</span>{\n\t<span class=\"hljs-keyword\">int</span> *x { <span class=\"hljs-literal\">NULL</span> };\n\tprint(x); <span class=\"hljs-comment\">// calls print(int*) because x has type int*</span>\n\tprint(<span class=\"hljs-number\">0</span>); <span class=\"hljs-comment\">// calls print(int) because 0 is an integer literal</span>\n\tprint(<span class=\"hljs-literal\">NULL</span>); <span class=\"hljs-comment\">// likely calls print(int), although we probably wanted print(int*)</span>\n \n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n}</code></pre>\n\n<p>C++ sẽ ngầm định chuyển đổi nullptr thành bất kỳ kiểu dữ liệu con trỏ nào. Vì vậy, trong ví dụ trên, nullptr đã được chuyển đổi ngầm định thành một con trỏ kiểu nguyên, và sau đó giá trị của nullptr được gán cho ptr. Điều này có tác dụng làm cho con trỏ kiểu nguyên ptr trở thành một con trỏ null.</p>\n\n<p>Chúng ta cũng có thể gọi một hàm với từ khóa nullptr làm tham số, nó sẽ khớp với bất kỳ đối số truyền vào nào của hàm mà nhận vào một giá trị con trỏ:</p>\n\n<pre><code class=\"language-cpp hljs\"><span class=\"hljs-keyword\">int</span> *ptr { <span class=\"hljs-literal\">nullptr</span> }; <span class=\"hljs-comment\">// note: ptr is still an integer pointer, just set to a null value</span></code></pre>\n\n<div id=\"5\">\n<h2>5. std::nullptr_t trong C++11</h2>\n</div>\n\n<p>C++ 11 cũng giới thiệu một kiểu dữ liệu mới gọi là std::nullptr_t (trong header &lt;cstddef&gt;). std::nullptr_t chỉ có thể giữ một giá trị: đó là nullptr! Mặc dù điều này có vẻ hơi ngớ ngẩn, nhưng nó lại hữu dụng trong một số tình huống. Nếu chúng ta muốn viết một hàm mà chỉ nhận vào đối số nullptr, vậy chúng ta sẽ thiết đặt kiểu dữ liệu nào cho đối số của hàm? Câu trả lời chính là std::nullptr_t.</p>\n\n<pre><code class=\"language-cpp hljs\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;iostream&gt;</span></span>\n \n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> x)</span>\n</span>{\n\t<span class=\"hljs-built_in\">std</span>::<span class=\"hljs-built_in\">cout</span> &lt;&lt; <span class=\"hljs-string\">\"print(int): \"</span> &lt;&lt; x &lt;&lt; <span class=\"hljs-string\">'\\n'</span>;\n}\n \n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> *x)</span>\n</span>{\n\t<span class=\"hljs-keyword\">if</span> (!x)\n\t\t<span class=\"hljs-built_in\">std</span>::<span class=\"hljs-built_in\">cout</span> &lt;&lt; <span class=\"hljs-string\">\"print(int*): null\\n\"</span>;\n\t<span class=\"hljs-keyword\">else</span>\n\t\t<span class=\"hljs-built_in\">std</span>::<span class=\"hljs-built_in\">cout</span> &lt;&lt; <span class=\"hljs-string\">\"print(int*): \"</span> &lt;&lt; *x &lt;&lt; <span class=\"hljs-string\">'\\n'</span>;\n}\n \n<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span>\n</span>{\n\t<span class=\"hljs-keyword\">int</span> *x { <span class=\"hljs-literal\">nullptr</span> };\n\tprint(x); <span class=\"hljs-comment\">// calls print(int*)</span>\n \n\tprint(<span class=\"hljs-literal\">nullptr</span>); <span class=\"hljs-comment\">// calls print(int*) as desired</span>\n \n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n}</code></pre>\n\n<p>Trên đây là bài viết của eLib.VN giới thiệu về con trỏ NULL trong C++. Có lẽ bạn sẽ không bao giờ cần phải sử dụng tới nó, nhưng việc biết thêm về một kiến thức mới chưa bao giờ là không tốt! Chúc các bạn thành công!</p>\n\n\n\n\n\n\n\n\n\n              "
}